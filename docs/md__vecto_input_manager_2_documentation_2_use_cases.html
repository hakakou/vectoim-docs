<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vecto Input Manager: Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Vecto Input Manager
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__vecto_input_manager_2_documentation_2_use_cases.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Use Cases </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md57"></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md58"></a>
Job Creator Tool (<span class="tt">job</span> command)</h1>
<p>See below for various use cases of the Job Creator Tool.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md59"></a>
Use Case 1: Interactive Vehicle Information Entry</h2>
<p>The user starts the tool with a parameter for interactive input about vehicle information. The system prints a list of available vehicle types. The user selects a vehicle type and the system requests input for all vehicle properties. For each property, the system prints the possible value range or enumerated values. At the end, the system saves the information to a JSON file.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -t vehicle -o vehicle_info.json</div>
<div class="line">vectoim job MultiSHEVHeavyLorry_v2_7 -t vehicle -o vehicle_info_shev.json</div>
</div><!-- fragment --><p> The second command chooses directly a vehicle type. For a list of supported vehicles, use the command <span class="tt">vectoim job -l</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md60"></a>
Use Case 2: Interactive Vehicle Information Entry with Components</h2>
<p>The user starts the tool with a parameter for interactive input about vehicle information and a list of XML component files. The system validates the XML components and if there is invalid input, it prints appropriate error messages and terminates. The user inputs the vehicle information as in the previous use case. When the user inputs the vehicle type, if the components don't match the vehicle type, the system prints an appropriate error message and requests the vehicle type again. At the end, the system saves the information to a JSON file and also produces a valid VECTO job XML.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i *.xml -t vehicle -o newvehicle1/output.xml</div>
<div class="line">vectoim job -i newvehicle1/output.xml -o newvehicle1/output.json</div>
</div><!-- fragment --><p>The second command effectively converts the vehicle job file (output.xml) from the first command to JSON format (output.json). The opposite is also supported.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md61"></a>
Use Case 3: Components and JSON Vehicle Information</h2>
<p>The user starts the tool with a list of XML component files and a JSON vehicle information file (created previously by interacting with the tool). The system validates the XML components and information in the JSON vehicle file against the vehicle type and if there is invalid input, it prints appropriate error messages and terminates. If all is OK, the system produces a valid VECTO job XML.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i vehicle_info.json -i *.xml -o newvehicle/output.xml</div>
</div><!-- fragment --><p>Note that some components are deeply nested into other placeholder objects, like tyres (for each axle), REESS, or even multiple gearboxes, retarders, etc. for multiple powertrain vehicles. In these cases, the vehicle JSON should be prepared with the placeholder objects and the component files should be named using a specific format. See below for more information.</p>
<p>In all cases of Vehicle Job generation, a *.report.txt file is also created with a detailed report of which components were used in the generation plus any other errors observed.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md62"></a>
Use Case 4: Replace Components in Existing Vehicle Job</h2>
<p>The user starts the tool with a list of XML component files and a valid XML job file. The system validates the XML components, the job XML, the matching of vehicle type and components, and if there is invalid input, it prints appropriate error messages and terminates. If all is OK, the system produces a valid VECTO job XML where the input components have replaced the related existing ones.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i *.xml -o modifiedvehicle/vehicle.xml</div>
</div><!-- fragment --><p>After the command run, the vehicle.report.txt will display details of the execution. Example output (from a Multiple PEV PrimaryBus vehicle):</p>
<div class="fragment"><div class="line">=== VEHICLE COMPONENTS ===</div>
<div class="line">Components.ElectricEnergyStorage.Battery[0].REESS              -&gt; Components.ElectricEnergyStorage.Battery[0].REESS.xml</div>
<div class="line">Components.ElectricEnergyStorage.Battery[1].REESS              -&gt; Components.ElectricEnergyStorage.Battery[1].REESS.xml</div>
<div class="line">Components.Powertrain[0].ElectricMachine.ElectricMachineSystem -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[0].Gearbox                               -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[0].TorqueConverter                       -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[0].Angledrive                            -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[0].Retarder                              -&gt; Components.Powertrain[0].Retarder.xml</div>
<div class="line">Components.Powertrain[0].Axlegear                              -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[1].IEPC                                  -&gt; * Not Changed</div>
<div class="line">Components.Powertrain[1].Retarder                              -&gt; Components.Powertrain[1].Retarder.xml</div>
<div class="line">Components.Powertrain[1].Axlegear                              -&gt; * Not Changed</div>
<div class="line">Components.AxleWheels.Data.Axles[0].Tyre                       -&gt; Components.AxleWheels.Data.Axles[0].Tyre.xml</div>
<div class="line">Components.AxleWheels.Data.Axles[1].Tyre                       -&gt; Components.AxleWheels.Data.Axles[1].Tyre.xml</div>
<div class="line"> </div>
<div class="line">=== XML VALIDATION ===</div>
<div class="line">Vehicle XML is valid.</div>
<div class="line"> </div>
<div class="line">=== INPUT JOB HASH ERRORS ===</div>
<div class="line">The following hash errors were found in the input vehicle job XML and corrected.</div>
<div class="line">- Components.ElectricEnergyStorage.Battery[0].REESS</div>
<div class="line">- Components.Powertrain[0].ElectricMachine.ElectricMachineSystem</div>
<div class="line">...</div>
<div class="line">- Components.AxleWheels.Data.Axles[1].Tyre</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md63"></a>
Use Case 5: Extract Vehicle Information to JSON</h2>
<p>The user starts the tool with a valid XML job file. The system validates the job XML and if there is invalid input, it prints an appropriate error message and terminates. The system saves the vehicle information (no components) to a JSON file.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim json -i .\Multiple_PEV_E2_IEPC_PrimaryBus.xml -o ./folder -r</div>
</div><!-- fragment --><p>The <span class="tt">-r</span> parameter will remove all components. The output JSON however has all the "placeholder" components, so it's compatible with <b>Use Case 3</b>. Example output:</p>
<div class="fragment"><div class="line">...</div>
<div class="line">&quot;Powertrain&quot;: {</div>
<div class="line">  &quot;$type&quot;: &quot;[Abstract_xEV_Powertrain_Type_v2_7]&quot;,</div>
<div class="line">  &quot;$values&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;$type&quot;: &quot;xEV_EM2_Powertrain_Type_v2_7&quot;,</div>
<div class="line">      &quot;ElectricMachine&quot;: {</div>
<div class="line">        &quot;$type&quot;: &quot;ElectricMachineType_v2_7&quot;,</div>
<div class="line">        &quot;PowertrainPosition&quot;: &quot;Item2&quot;,</div>
<div class="line">        &quot;Count&quot;: 2,</div>
<div class="line">        &quot;ElectricMachineSystem&quot;: null,</div>
<div class="line">        &quot;ADC&quot;: null</div>
<div class="line">      },</div>
<div class="line">      &quot;Gearbox&quot;: null,</div>
<div class="line">      &quot;TorqueConverter&quot;: null,</div>
<div class="line">      &quot;Angledrive&quot;: null,</div>
<div class="line">      &quot;Retarder&quot;: null,</div>
<div class="line">      &quot;Axlegear&quot;: null,</div>
<div class="line">      &quot;axleNumber&quot;: 1</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;$type&quot;: &quot;xEV_IEPC_Powertrain_Type_v2_7&quot;,</div>
<div class="line">      &quot;IEPC&quot;: null,</div>
<div class="line">      &quot;Retarder&quot;: null,</div>
<div class="line">      &quot;Axlegear&quot;: null,</div>
<div class="line">      &quot;axleNumber&quot;: 2</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">},</div>
<div class="line">...</div>
</div><!-- fragment --><p>Running this JSON with the command in <b>Use Case 3</b> and components with file names such as:</p>
<p><span class="tt">Components.Powertrain[1].IEPC.json</span>, <span class="tt">Components.Powertrain[0].Axlegear.json</span> would correctly recreate the original vehicle.</p>
<p>This command also accepts a wildcard to convert multiple vehicles at once.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md64"></a>
Use Case: Update Component Hashes and Validate Vehicle Job</h2>
<p>The user can simply input a single vehicle XML job. The command will recreate the entire vehicle based on the latest schema and rehash all components. Validation errors and any previously wrong hashes will be reported in the <span class="tt">*.report.txt</span> file.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i .\Multiple_PEV_E2_IEPC_PrimaryBus.xml -o fixed.xml</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md65"></a>
Use Case: Extract All Components to JSON Format</h2>
<p>The user starts the tool with a valid XML job file and specifies JSON output format. The system validates the job XML and extracts each component found in the vehicle, saving them as separate JSON files with descriptive filenames that indicate component type, path, and array indices.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim extract -i vehicle.xml -o ./components -f json</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md66"></a>
Use Case: Overwrite a Value of a Vehicle Job from the Command Line</h2>
<p>Using one or more <span class="tt">-m</span> key value pairs will override any values when running with our without component inputs.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i .\Multiple_PEV_E2_IEPC_PrimaryBus.xml -o version.xml -m Model=Variation1 -m Components.ElectricEnergyStorage.Battery[1].DeteriorationPerformanceRatio=10</div>
<div class="line"> </div>
<div class="line">vectoim job -i .\Multiple_PEV_E2_IEPC_PrimaryBus.xml -o version.xml -m Components.ElectricEnergyStorage.Battery[1]=No</div>
</div><!-- fragment --><p>The first command modifies a value nested in an array. The second command is an example of removing the entire object of the second item of an array.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md67"></a>
Use Case: Modify Vehicle Properties Using Partial JSON Update Files</h2>
<p>The user can modify specific properties of a vehicle by providing partial JSON files that contain only the properties to be updated. Multiple JSON files can be combined. This approach allows modifying individual properties, nested objects, or array elements without recreating the entire vehicle structure.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim job -i vehicle.json -i modify.json -o output.json</div>
<div class="line">vectoim job -i ./config/*.json -o vehicle.xml</div>
</div><!-- fragment --><p>The system processes input files in order, merging them into a single vehicle definition. Each subsequent file can override properties from previous files.</p>
<p><b>Example base vehicle file (vehicle.json):</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;$type&quot;: &quot;Vehicle_IEPC_HeavyLorryDeclarationType_v2_7&quot;,</div>
<div class="line">  &quot;Manufacturer&quot;: &quot;ZZZ&quot;,</div>
<div class="line">  &quot;Model&quot;: &quot;BaseModel&quot;,</div>
<div class="line">  &quot;OVC&quot;: true,</div>
<div class="line">  &quot;Components&quot;: {</div>
<div class="line">    &quot;Axlegear&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;Ratio&quot;: 3.0,</div>
<div class="line">        &quot;TorqueLossMap&quot;: { &quot;$values&quot;: [...] }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    &quot;AirDrag&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;CdxA_0&quot;: 5.0</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Example modification file (modify.json):</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;Manufacturer&quot;: &quot;XXX&quot;,</div>
<div class="line">  &quot;OVC&quot;: false,</div>
<div class="line">  &quot;Components&quot;: {</div>
<div class="line">    &quot;Axlegear&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;Ratio&quot;: 3.64,</div>
<div class="line">        &quot;TorqueLossMap&quot;: {</div>
<div class="line">          &quot;$values&quot;: [</div>
<div class="line">            { &quot;torqueLoss&quot;: 15.0 },</div>
<div class="line">            { &quot;torqueLoss&quot;: 62.0 },</div>
<div class="line">            { &quot;torqueLoss&quot;: 61.0 }</div>
<div class="line">          ]</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    &quot;Retarder&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;CertificationMethod&quot;: &quot;Measured&quot;,</div>
<div class="line">        &quot;RetarderLossMap&quot;: {</div>
<div class="line">          &quot;$values&quot;: [</div>
<div class="line">            { &quot;retarderSpeed&quot;: 42.0, &quot;torqueLoss&quot;: 42.0 }</div>
<div class="line">          ]</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    &quot;AirDrag&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;CdxA_0&quot;: 1.0</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Result:</b> The output vehicle will have:</p>
<ul>
<li><span class="tt">Manufacturer</span> changed from "ZZZ" to "XXX"</li>
<li><span class="tt">OVC</span> changed from <span class="tt">true</span> to <span class="tt">false</span></li>
<li><span class="tt">Components.Axlegear.Data.Ratio</span> changed from 3.0 to 3.64</li>
<li><span class="tt">Components.Axlegear.Data.TorqueLossMap</span> replaced with new values</li>
<li><span class="tt">Components.Retarder.Data</span> updated with new certification method and loss map</li>
<li><span class="tt">Components.AirDrag.Data.CdxA_0</span> changed from 5.0 to 1.0</li>
</ul>
<p><b>Advanced array manipulation:</b> To remove all items from an array after a certain index, use <span class="tt">"$crop": true</span>:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;Components&quot;: {</div>
<div class="line">    &quot;Retarder&quot;: {</div>
<div class="line">      &quot;Data&quot;: {</div>
<div class="line">        &quot;RetarderLossMap&quot;: {</div>
<div class="line">          &quot;$values&quot;: [</div>
<div class="line">            { &quot;retarderSpeed&quot;: 42.0 },</div>
<div class="line">            { &quot;$crop&quot;: true }</div>
<div class="line">          ]</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This will keep only the first item in the <span class="tt">RetarderLossMap</span> array and remove all subsequent items.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md68"></a>
Standard Values Tool (<span class="tt">sv</span> command)</h1>
<p>See below for various use cases of the Standard Values Tool.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md69"></a>
Use Case 1: Create Standard Component from JSON Input</h2>
<p>The user starts the tool with a JSON file containing component information. The system validates the input for correctness and completion. If there is an error, the system prints the appropriate error message and terminates. Otherwise, if all necessary information is given, the system calculates the standard values and creates an XML component file with standard values where appropriate.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim sv -i battery_input.json -o battery_component.xml</div>
</div><!-- fragment --><p>For an example component input JSON, use the command <span class="tt">vectoim sv fuelcell -e</span>.</p>
<p>For a list of supported components, use the command <span class="tt">vectoim sv -l</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md70"></a>
Use Case 2: Interactive Standard Component Creation</h2>
<p>The user starts the tool with a parameter indicating that they will provide input interactively. The system requests all the information from the user interactively by asking for the component type and the respective information. When all necessary information is given, the system calculates the standard values and creates an XML component file with standard values where appropriate.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim sv battery -t -o battery_component.xml</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md71"></a>
Extra Use Case: Mix Input File and Interactive Mode</h2>
<p>In this case, the interactive mode has as a default value the value found in the JSON. The user may click enter to accept it, or input a different value.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim sv battery -t -i battery.json -o battery_component.xml</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md72"></a>
Extra Use Case: Mix Input File and Parameter Value Input</h2>
<p>Any property can be overwritten from the command line. Multiple <span class="tt">-m</span> are also supported.</p>
<p><b>Command example:</b> </p><div class="fragment"><div class="line">vectoim sv -i fuelcell.json -o fuelcell.xml -m FCSRatedPower=200</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
