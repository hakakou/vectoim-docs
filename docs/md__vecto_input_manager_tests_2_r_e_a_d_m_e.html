<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vecto Input Manager: Vecto Input Manager Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Vecto Input Manager
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__vecto_input_manager_tests_2_r_e_a_d_m_e.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Vecto Input Manager Tests </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md95"></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md96"></a>
Overview</h1>
<p>This NUnit test project validates the <a class="el" href="namespace_vecto_input_manager.html">VectoInputManager</a> functionality and also includes utilities for code generation.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md97"></a>
Test Namespaces</h2>
<p><b>VectoInputManager.Tests.Core</b> - Core functionality tests</p>
<ul>
<li><span class="tt">ObjectBuilder_Tests</span> - Tests for building objects interactively with prompts</li>
<li><span class="tt">ObjectBuilder_JObject_Tests</span> - Tests for JObject-based object building</li>
<li><span class="tt">CorpusBuilder_Tests</span> - Tests for corpus building functionality (combining component files into vehicles)</li>
<li><span class="tt">VehicleBuilder_Tests</span> - Tests for interactive vehicle creation workflows</li>
<li><span class="tt">JsonInputUtils_Tests</span> - Tests for JSON input parsing and utilities</li>
<li><span class="tt">JsonDeclarationUtils_Tests</span> - Tests for JSON declaration serialization/deserialization</li>
<li><span class="tt">XmlSerializer_Tests</span> - Tests for XML serialization (decimal formatting, culture handling)</li>
<li><span class="tt">XmlUtils_Tests</span> - Tests for XML utility functions and synthetic vehicle generation</li>
<li><span class="tt">TypeUtils_Tests</span> - Tests for type reflection and component conversion utilities</li>
</ul>
<p><b>VectoInputManager.Tests.Console</b> - Console command tests</p>
<ul>
<li><span class="tt">Console_Job_Tests</span> - Tests for the <span class="tt">job</span> console command (vehicle creation)</li>
<li><span class="tt">Console_StandardValues_Tests</span> - Tests for the <span class="tt">standardvalues</span> console command (component generation)</li>
<li><span class="tt">Console_Json_Tests</span> - Tests for the <span class="tt">json</span> console command (XML to JSON conversion)</li>
<li><span class="tt">Console_Extract_Tests</span> - Tests for the <span class="tt">extract</span> console command (component extraction from vehicles)</li>
</ul>
<p><b>VectoInputManager.Tests.StandardValues</b> - Standard value calculation tests</p>
<ul>
<li><span class="tt">StandardValues_Tests</span> - Tests for component standard values calculation (see next section for details)</li>
</ul>
<p><b>VectoInputManager.Tests.Samples</b> - Sample processing tests</p>
<ul>
<li><span class="tt">SampleProcessing_Tests</span> - Tests for validating serialization, deserialization, and schema validation of XML and JSON formats on sample vehicle files</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md98"></a>
Utilities</h2>
<p>The utilities below are included in the test project but are marked as <span class="tt">[Explicit]</span> tests. They are not run automatically and must be executed manually when needed.</p>
<p><b>VectoInputManager.Tests.CodeGeneration</b> - Code generation utilities (see next section for details)</p>
<ul>
<li><span class="tt">CodeGeneration_Utility</span> - Generates C# helper code and JSON schemas for component input types</li>
<li><span class="tt">GenerateVectoObjects_Utility</span> - Generates C# classes from VECTO XSD schemas</li>
</ul>
<p><b>VectoInputManager.Tests.Utilities</b> - Data Generation Utilities</p>
<ul>
<li><span class="tt">SyntheticData_Utility</span> - Generates synthetic XML test data from existing samples</li>
<li><span class="tt">Helpers_Utility</span> - Helper code for internal development</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md99"></a>
Standard Value Components Calculation Tests</h1>
<p>The test class <span class="tt">StandardValues_Tests</span> validates the standard values calculation methodology for vehicle components. The test calculates component standard values from JSON input files and compares the results against expected XML output files.</p>
<p><b>Test cases are created by adding pairs of files</b>: each JSON input file must have a matching XML expected output file with the same base name.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md100"></a>
Test Structure</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md101"></a>
Input Files Location</h3>
<p>Test cases are organized in component-specific folders under: </p><div class="fragment"><div class="line">Input/StandardValues/{ComponentType}/</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md102"></a>
Supported Component Types</h3>
<ul>
<li><b>ADC</b> - Alternating Current/Direct Current converter</li>
<li><b>Angledrive</b> - Angle drive components</li>
<li><b>Axle</b> - Axle components</li>
<li><b>Battery</b> - Battery systems</li>
<li><b>Capacitor</b> - Capacitor systems</li>
<li><b>EMS</b> - Energy Management System</li>
<li><b>FuelCell</b> - Fuel cell systems</li>
<li><b>GearBox</b> - Gearbox/transmission</li>
<li><b>IEPC</b> - Integrated Electric Powertrain</li>
<li><b>Retarder</b> - Retarder/brake systems</li>
<li><b>TC</b> - Torque Converter</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md103"></a>
Test Workflow</h2>
<p>For each component type, the test:</p>
<ol type="1">
<li>Loads the input data from <span class="tt">{ComponentName}.json</span></li>
<li>Instantiates the appropriate calculator and computes component values</li>
<li>Creates a component XML with the calculated values</li>
<li>Compares recursively the generated XML against the expected <span class="tt">{ComponentName}.xml</span></li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md104"></a>
File Pairing</h2>
<p>Each test case consists of <b>a pair of files</b> with <b>matching base names</b>:</p><ul>
<li><span class="tt">{ComponentName}.json</span> - Input data (test parameters)</li>
<li><span class="tt">{ComponentName}.xml</span> - Expected output (reference result)</li>
</ul>
<p>The test automatically discovers all JSON files and looks for their corresponding XML pairs.</p>
<p><b>To add a new test case, create a pair of files:</b></p>
<div class="fragment"><div class="line">Input/StandardValues/{ComponentType}/{TestName}.json</div>
<div class="line">Input/StandardValues/{ComponentType}/{TestName}.xml</div>
</div><!-- fragment --><p>Running the test again will automatically discover and validate the new pair.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md105"></a>
Example Files</h3>
<div class="fragment"><div class="line">Input/StandardValues/Battery/</div>
<div class="line">  ├── Battery_Standard.json</div>
<div class="line">  ├── Battery_Standard.xml</div>
<div class="line">  ├── Battery_HighCapacity.json</div>
<div class="line">  ├── Battery_HighCapacity.xml</div>
<div class="line">  ├── Battery_LowVoltage.json</div>
<div class="line">  └── Battery_LowVoltage.xml</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md106"></a>
Output</h2>
<p>Test output is generated in: <span class="tt">VectoInputManagerTests/Output/{DateTime}/InputOutput_Tests/</span></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md107"></a>
Code Generation</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md108"></a>
XSD Schema Updates</h2>
<p>Vecto XSDs are located in the path <span class="tt">VectoCore/VectoCore/Resources/XSD</span> and are used to generate C# classes representing VECTO objects. If the XSD files are modified, do the following to update the projects:</p>
<p>1) Execute <span class="tt">GenerateVectoObjects_Utility/GenerateVectoObjects</span></p>
<p>This will generate the file <span class="tt">VectoInputManagerTests/Output/{DateTime}/VectoObjects.cs</span>. Copy this and replace the file <span class="tt">VectoObjects/Generated/VectoObjects.cs</span></p>
<p>2) Update the JSON schemas by running <span class="tt">CodeGeneration_Utility/GenerateComponentInputJsonSchemas</span></p>
<p>This updates the JSON Schema files in the folders:</p>
<ul>
<li>VectoInputManager/ComponentSchemas/*.schema.json</li>
<li>VectoInputManager/InputSchemas/*.schema.json</li>
<li>VectoInputManager/VehicleSchemas/*.schema.json</li>
</ul>
<p>**Important: These files should be committed to a public repository, and its base URL should be reflected in the file <span class="tt"><a class="el" href="namespace_vecto_input_manager.html">VectoInputManager</a>\VectoInputManagerCore\Consts.cs</span>**</p>
<p>3) Execute all tests in the <span class="tt">VectoInputManagerTests</span> project.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md109"></a>
Extra steps if vehicles are added</h3>
<p>If the XSDs include new vehicles, then also do the following after step (1) above and before step (2).</p>
<p>1) Execute <span class="tt">CodeGeneration_Utility/GenerateVehicleTypesData_Utility</span></p>
<p>This will generate the file <span class="tt">VectoInputManagerTests/Output/{DateTime}/VehicleTypes.csv</span>. Edit it and then replace the file <span class="tt">VectoInputManagerCore/Data/VehicleTypes.csv</span>.</p>
<p>2) Execute <span class="tt">CodeGeneration_Utility/Generate_VehicleTypesCs_Utility</span></p>
<p>This will generate the file <span class="tt">VectoInputManagerTests/Output/{DateTime}/VehicleTypes.cs</span>. Replace the file <span class="tt">VectoObjects/VehicleTypes.cs</span></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md110"></a>
Vehicle Samples</h1>
<p>The <span class="tt">VectoInputManager.Tests.Samples</span> namespace includes tests that check serialization, deserialization, hash, output xml validation on all the official VECTO Job samples (last updated <span class="tt">23-05-2025</span>).</p>
<p>Samples can be added to the folder <span class="tt"><a class="el" href="namespace_vecto_input_manager.html">VectoInputManager</a>\VectoInputManagerTests\Input\Samples</span>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
